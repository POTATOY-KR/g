#pragma once
#include "addpoint.h"

vector<logogame> gamefull;
logogame insertlog;
setting gameset;
fstream out;
fstream gameout;
int map[MSIZE + 2][MSIZE + 2][4];
int stone_pos[126][11];
int point_pos[126][11];
int i, j, k, l;
bool turn, pvp, ckturn, endchk, waitchk;
int direction[8][2] = { {-1,-1},{-1,0},{-1,1},{0,-1},{0,1},{1,-1},{1,0},{1,1} }, ckdirection[8][3];
int direct[4][2] = { {-1,-1},{-1,0},{0,-1},{1,-1} }, ckdirect[4][3];
int spp[126][11] = {
	{ -1, 3, 0, 0, 0, 1, 1, 0, 2, -1, -1 }, // 1-1
	{ -1, -1, 2, 0, 1, 1, 0, 0, 0, 3, -1 },
	{ 3, 0, 0, 0, 1, 1, 0, 2, -1, -1, -1 },
	{ -1, -1, -1, 2, 0, 1, 1, 0, 0, 0, 3 },
	{ -1, 3, 0, 0, 0, 1, 1, 0, 0, 0, 1 },  // 1-2
	{ 1, 0, 0, 0, 1, 1, 0, 0, 0, 3, -1 },
	{ 3, 0, 0, 0, 1, 1, 0, 0, 0, 1, -1 },
	{ -1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 3 },
	{ -1, 3, 0, 0, 0, 1, 1, 0, 0, 2, -1 }, // 1-3
	{ -1, 2, 0, 0, 1, 1, 0, 0, 0, 3, -1 },
	{ 3, 0, 0, 0, 1, 1, 0, 0, 2, -1, -1 },
	{ -1, -1, 2, 0, 0, 1, 1, 0, 0, 0, 3 },

	{ -1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1 }, // 2-1
	{ 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, -1 },
	{ -1, 1, 0, 0, 0, 1, 1, 0, 0, 2, -1 }, // 2-2
	{ -1, 2, 0, 0, 1, 1, 0, 0, 0, 1, -1 },
	{ 1, 0, 0, 0, 1, 1, 0, 0, 2, -1, -1 },
	{ -1, -1, 2, 0, 0, 1, 1, 0, 0, 0, 1 },
	{ -1, -1, 2, 0, 0, 1, 1, 0, 0, 2, -1 }, // 2-3
	{ -1, 2, 0, 0, 1, 1, 0, 0, 2, -1, -1 },
	{ -1, 3, 0, 0, 0, 1, 1, 0, 0, 0, 3 }, // 2-4
	{ 3, 0, 0, 0, 1, 1, 0, 0, 0, 3, -1 },

	{ -1, -1, 3, 0, 0, 1, 0, 1, 0, 0, 1 }, // 3-1
	{ 1, 0, 0, 1, 0, 1, 0, 0, 3, -1, -1 },
	{ 3, 0, 0, 1, 0, 1, 0, 0, 1, -1, -1 },
	{ -1, -1, 1, 0, 0, 1, 0, 1, 0, 0, 3 },
	{ -1, -1, 3, 0, 0, 1, 0, 1, 0, 2, -1 }, // 3-2
	{ -1, 2, 0, 1, 0, 1, 0, 0, 3, -1, -1 },
	{ 3, 0, 0, 1, 0, 1, 0, 2, -1, -1, -1 },
	{ -1, -1, -1, 2, 0, 1, 0, 1, 0, 0, 3 },
	{ -1, -1, 3, 0, 0, 1, 0, 1, 0, 0, 3 }, // 3-3
	{ 3, 0, 0, 1, 0, 1, 0, 0, 3, -1, -1 },
	{ -1, -1, -1, 3, 0, 1, 0, 0, 1, 0, 3 }, // 3-4
	{ 3, 0, 1, 0, 0, 1, 0, 3, -1, -1, -1 },

	{ -1, -1, 3, 0, 0, 1, 1, 1, 2, -1, -1 }, // 4-1
	{ -1, -1, 2, 1, 1, 1, 0, 0, 3, -1, -1 },
	{ -1, 3, 0, 0, 1, 1, 1, 2, -1, -1, -1 },
	{ -1, -1, -1, 2, 1, 1, 1, 0, 0, 3, -1 },
	{ 3, 0, 0, 1, 1, 1, 2, -1, -1, -1, -1 },
	{ -1, -1, -1, -1, 2, 1, 1, 1, 0, 0, 3 },
	{ -1, -1, -1, 2, 0, 1, 1, 1, 0, 2, -1 }, // 4-2
	{ -1, -1, 2, 0, 1, 1, 1, 0, 2, -1, -1 },
	{ -1, 2, 0, 1, 1, 1, 0, 2, -1, -1, -1 },
	{ -1, -1, -1, 2, 0, 1, 1, 1, 0, 0, 1 }, // 4-3
	{ 1, 0, 0, 1, 1, 1, 0, 2, -1, -1, -1 },
	{ -1, -1, 2, 0, 1, 1, 1, 0, 0, 1, -1 },
	{ -1, 1, 0, 0, 1, 1, 1, 0, 2, -1, -1 },
	{ -1, 2, 0, 1, 1, 1, 0, 0, 1, -1, -1 },
	{ -1, -1, 1, 0, 0, 1, 1, 1, 0, 2, -1 },
	{ -1, -1, 1, 0, 0, 1, 1, 1, 0, 0, 1 }, // 4-4
	{ -1, 1, 0, 0, 1, 1, 1, 0, 0, 1, -1 },
	{ 1, 0, 0, 1, 1, 1, 0, 0, 1, -1, -1 },

	{ -1, -1, -1, 3, 0, 1, 0, 1, 1, 2, -1 }, // 5-1
	{ -1, 2, 1, 1, 0, 1, 0, 3, -1, -1, -1 },
	{ -1, 3, 0, 1, 0, 1, 1, 2, -1, -1, -1 },
	{ -1, -1, -1, 2, 1, 1, 0, 1, 0, 3, -1 },
	{ 3, 0, 1, 0, 1, 1, 2, -1, -1, -1, -1 },
	{ -1, -1, -1, -1, 2, 1, 1, 0, 1, 0, 3 },
	{ -1, -1, -1, 3, 0, 1, 0, 1, 1, 0, 1 }, // 5-2
	{ 1, 0, 1, 1, 0, 1, 0, 3, -1, -1, -1 },
	{ -1, 3, 0, 1, 0, 1, 1, 0, 1, -1, -1 },
	{ -1, -1, 1, 0, 1, 1, 0, 1, 0, 3, -1 },
	{ 3, 0, 1, 0, 1, 1, 0, 1, -1, -1, -1 },
	{ -1, -1, -1, 1, 0, 1, 1, 0, 1, 0, 3 },
	{ -1, -1, -1, -1, 3, 1, 0, 0, 1, 1, 3 }, // 5-3
	{ 3, 1, 1, 0, 0, 1, 3, -1, -1, -1, -1 },
	{ -1, 3, 1, 0, 0, 1, 1, 3, -1, -1, -1 },
	{ -1, -1, -1, 3, 1, 1, 0, 0, 1, 3, -1 },
	{ 3, 1, 0, 0, 1, 1, 3, -1, -1, -1, -1 },
	{ -1, -1, -1, -1, 3, 1, 1, 0, 0, 1, 3 },
	{ -1, -1, -1, -1, 3, 1, 0, 1, 0, 1, 3 }, // 5-4
	{ 3, 1, 0, 1, 0, 1, 3, -1, -1, -1, -1 },
	{ -1, -1, 3, 1, 0, 1, 0, 1, 3, -1, -1 },

	{ -1, -1, 3, 0, 0, 1, 1, 1, 0, 0, 3 }, // 6-1
	{ -1, 3, 0, 0, 1, 1, 1, 0, 0, 3, -1 },
	{ 3, 0, 0, 1, 1, 1, 0, 0, 3, -1, -1 },
	{ -1, -1, 3, 0, 0, 1, 1, 1, 0, 2, -1 }, // 6-2
	{ -1, 2, 0, 1, 1, 1, 0, 0, 3, -1, -1 },
	{ -1, 3, 0, 0, 1, 1, 1, 0, 2, -1, -1 },
	{ -1, -1, 2, 0, 1, 1, 1, 0, 0, 3, -1 },
	{ 3, 0, 0, 1, 1, 1, 0, 2, -1, -1, -1 },
	{ -1, -1, -1, 2, 0, 1, 1, 1, 0, 0, 3 },
	{ -1, -1, 3, 0, 0, 1, 1, 1, 0, 0, 1 }, // 6-3
	{ 1, 0, 0, 1, 1, 1, 0, 0, 3, -1, -1 },
	{ -1, 3, 0, 0, 1, 1, 1, 0, 0, 1, -1 },
	{ -1, 1, 0, 0, 1, 1, 1, 0, 0, 3, -1 },
	{ 3, 0, 0, 1, 1, 1, 0, 0, 1, -1, -1 },
	{ -1, -1, 1, 0, 0, 1, 1, 1, 0, 0, 3 },
	{ -1, -1, -1, 3, 0, 1, 1, 0, 1, 0, 3 }, // 6-4
	{ 3, 0, 1, 0, 1, 1, 0, 3, -1, -1, -1 },
	{ -1, -1, 3, 0, 1, 1, 0, 1, 0, 3, -1 },
	{ -1, 3, 0, 1, 0, 1, 1, 0, 3, -1, -1 },
	{ 3, 0, 1, 1, 0, 1, 0, 3, -1, -1, -1 },
	{ -1, -1, -1, 3, 0, 1, 0, 1, 1, 0, 3 },

	{ -1, -1, -1, 3, 0, 1, 1, 1, 1, 0, 3 }, // 7-1
	{ -1, -1, 3, 0, 1, 1, 1, 1, 0, 3, -1 },
	{ -1, 3, 0, 1, 1, 1, 1, 0, 3, -1, -1 },
	{ 3, 0, 1, 1, 1, 1, 0, 3, -1, -1, -1 },
	{ -1, -1, -1, 1, 0, 1, 1, 1, 1, 0, 3 }, // 7-2
	{ 3, 0, 1, 1, 1, 1, 0, 1, -1, -1, -1 },
	{ -1, -1, 1, 0, 1, 1, 1, 1, 0, 3, -1 },
	{ -1, 3, 0, 1, 1, 1, 1, 0, 1, -1, -1 },
	{ -1, 1, 0, 1, 1, 1, 1, 0, 3, -1, -1 },
	{ -1, -1, 3, 0, 1, 1, 1, 1, 0, 1, -1 },
	{ 1, 0, 1, 1, 1, 1, 0, 3, -1, -1, -1 },
	{ -1, -1, -1, 3, 0, 1, 1, 1, 1, 0, 1 },
	{ -1, -1, -1, -1, 2, 1, 1, 1, 1, 0, 3 }, // 7-3
	{ 3, 0, 1, 1, 1, 1, 2, -1, -1, -1, -1 },
	{ -1, -1, -1, 2, 1, 1, 1, 1, 0, 3, -1 },
	{ -1, 3, 0, 1, 1, 1, 1, 2, -1, -1, -1 },
	{ -1, -1, 2, 1, 1, 1, 1, 0, 3, -1, -1 },
	{ -1, -1, 3, 0, 1, 1, 1, 1, 2, -1, -1 },
	{ -1, 2, 1, 1, 1, 1, 0, 3, -1, -1, -1 },
	{ -1, -1, -1, 3, 0, 1, 1, 1, 1, 2, -1 },
	{ -1, -1, -1, -1, 3, 1, 1, 0, 1, 1, 3 }, // 7-4
	{ -1, -1, -1, 3, 1, 1, 0, 1, 1, 3, -1 },
	{ -1, 3, 1, 1, 0, 1, 1, 3, -1, -1, -1 },
	{ 3, 1, 1, 0, 1, 1, 3, -1, -1, -1, -1 },
	{ -1, -1, -1, -1, 3, 1, 1, 1, 0, 1, 3 }, // 7-5
	{ 3, 1, 0, 1, 1, 1, 3, -1, -1, -1, -1 },
	{ -1, -1, -1, 3, 1, 1, 1, 0, 1, 3, -1 },
	{ -1, 3, 1, 0, 1, 1, 1, 3, -1, -1, -1 },
	{ -1, -1, 3, 1, 1, 1, 0, 1, 3, -1, -1 },
	{ -1, -1, 3, 1, 0, 1, 1, 1, 3, -1, -1 },
	{ 3, 1, 1, 1, 0, 1, 3, -1, -1, -1, -1 },
	{ -1, -1, -1, -1, 3, 1, 0, 1, 1, 1, 3 }
};
int sps[126][11] = {
	{ 0, 0, 0, 11, 22, 0, 0, 0, 0, 0, 0 }, // 1-1
	{ 0, 0, 0, 0, 0, 0, 22, 11, 0, 0, 0 },
	{ 0, 0, 11, 22, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 22, 11, 0, 0 },
	{ 0, 0, 0, 11, 22, 0, 0, 11, 0, 0, 0 }, // 1-2
	{ 0, 0, 0, 11, 0, 0, 22, 11, 0, 0, 0 },
	{ 0, 0, 11, 22, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 22, 11, 0, 0 },
	{ 0, 0, 0, 11, 22, 0, 0, 11, 0, 0, 0 }, // 1-3
	{ 0, 0, 0, 11, 0, 0, 22, 11, 0, 0, 0 },
	{ 0, 0, 11, 22, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 22, 11, 0, 0 },

	{ 0, 0, 0, 0, 11, 0, 0, 11, 0, 0, 0 }, // 2-1
	{ 0, 0, 0, 11, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 11, 0, 0, 0 }, // 2-2
	{ 0, 0, 0, 11, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 11, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 11, 0, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 11, 0, 0, 0 }, // 2-3
	{ 0, 0, 0, 11, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 11, 22, 0, 0, 22, 11, 0, 0 }, // 2-4
	{ 0, 0, 11, 22, 0, 0, 22, 11, 0, 0, 0 },

	{ 0, 0, 0, 0, 11, 0, 22, 0, 0, 0, 0 }, // 3-1
	{ 0, 0, 0, 0, 22, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 11, 0, 22, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 22, 0, 11, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 22, 0, 0, 0, 0 }, // 3-2
	{ 0, 0, 0, 0, 22, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 11, 0, 22, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 22, 0, 11, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 22, 0, 11, 0, 0 }, // 3-3
	{ 0, 0, 11, 0, 22, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 11, 11, 0, 0, 0 }, // 3-4
	{ 0, 0, 0, 11, 11, 0, 0, 0, 0, 0, 0 },

	{ 0, 0, 0, 11, 22, 0, 0, 0, 0, 0, 0 }, // 4-1
	{ 0, 0, 0, 0, 0, 0, 22, 11, 0, 0, 0 },
	{ 0, 0, 11, 22, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 22, 11, 0, 0 },
	{ 0, 11, 22, 0, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 0, 22, 11, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 0, 11, 0, 0 }, // 4-2
	{ 0, 0, 0, 11, 0, 0, 0, 11, 0, 0, 0 },
	{ 0, 0, 11, 0, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 0, 11, 0, 0 }, // 4-3
	{ 0, 0, 11, 0, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 11, 0, 0, 0, 11, 0, 0, 0 },
	{ 0, 0, 0, 11, 0, 0, 0, 11, 0, 0, 0 },
	{ 0, 0, 11, 0, 0, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 0, 11, 0, 0 },
	{ 0, 0, 0, 0, 11, 0, 0, 0, 11, 0, 0 }, // 4-4
	{ 0, 0, 0, 11, 0, 0, 0, 11, 0, 0, 0 },
	{ 0, 0, 11, 0, 0, 0, 11, 0, 0, 0, 0 },

	{ 0, 0, 0, 0, 11, 0, 22, 0, 0, 0, 0 }, // 5-1
	{ 0, 0, 0, 0, 22, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 11, 0, 22, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 22, 0, 11, 0, 0 },
	{ 0, 11, 0, 22, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 22, 0, 11, 0 },
	{ 0, 0, 0, 0, 11, 0, 22, 0, 0, 0, 0 }, // 5-2
	{ 0, 0, 0, 0, 22, 0, 11, 0, 0, 0, 0 },
	{ 0, 0, 11, 0, 22, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 22, 0, 11, 0, 0 },
	{ 0, 11, 0, 22, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 22, 0, 11, 0 },
	{ 0, 0, 0, 0, 0, 0, 11, 11, 0, 0, 0 }, // 5-3
	{ 0, 0, 0, 11, 11, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 11, 11, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 11, 11, 0, 0, 0 },
	{ 0, 0, 11, 11, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 11, 11, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 22, 0, 22, 0, 0 }, // 5-4
	{ 0, 0, 22, 0, 22, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 22, 0, 22, 0, 0, 0, 0 },

	{ 0, 0, 0, 0, 33, 0, 0, 0, 33, 0, 0 }, // 6-1
	{ 0, 0, 0, 33, 0, 0, 0, 33, 0, 0, 0 },
	{ 0, 0, 33, 0, 0, 0, 33, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 33, 0, 0, 0, 0, 0, 0 }, // 6-2
	{ 0, 0, 0, 0, 0, 0, 33, 0, 0, 0, 0 },
	{ 0, 0, 0, 33, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 33, 0, 0, 0 },
	{ 0, 0, 33, 0, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 0, 33, 0, 0 },
	{ 0, 0, 0, 0, 33, 0, 0, 0, 0, 0, 0 }, // 6-3
	{ 0, 0, 0, 0, 0, 0, 33, 0, 0, 0, 0 },
	{ 0, 0, 0, 33, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 33, 0, 0, 0 },
	{ 0, 0, 33, 0, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 0, 33, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 33, 0, 0, 0 }, // 6-4
	{ 0, 0, 0, 33, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 33, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 33, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 33, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 33, 0, 0, 0, 0 },

	{ 0, 0, 0, 0, 44, 0, 0, 0, 0, 44, 0 }, // 7-1
	{ 0, 0, 0, 44, 0, 0, 0, 0, 44, 0, 0 },
	{ 0, 0, 44, 0, 0, 0, 0, 44, 0, 0, 0 },
	{ 0, 44, 0, 0, 0, 0, 44, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 44, 0 }, // 7-2
	{ 0, 44, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 0, 44, 0, 0 },
	{ 0, 0, 44, 0, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 44, 0, 0, 0 },
	{ 0, 0, 0, 44, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 44, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 44, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 44, 0 }, // 7-3
	{ 0, 44, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 0, 44, 0, 0 },
	{ 0, 0, 44, 0, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 44, 0, 0, 0 },
	{ 0, 0, 0, 44, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 44, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 44, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 44, 0, 0, 0 }, // 7-4
	{ 0, 0, 0, 0, 0, 0, 44, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 44, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 44, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 0, 44, 0, 0 }, // 7-5
	{ 0, 0, 44, 0, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 0, 44, 0, 0, 0 },
	{ 0, 0, 0, 44, 0, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 44, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 44, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 44, 0, 0, 0, 0, 0, 0 },
	{ 0, 0, 0, 0, 0, 0, 44, 0, 0, 0, 0 }
};
void resetpoint() {
	int i, j;
	for (i = 0; i < 126; ++i) {
		for (j = 0; j < 11; ++j) {
			switch (sps[i][j]) {
			case 0:
				point_pos[i][j] = 0;
				break;
			case 11:
				point_pos[i][j] = gameset.ai.firstweight;
				break;
			case 22:
				point_pos[i][j] = gameset.ai.secondweight;
				break;
			case 33:
				point_pos[i][j] = gameset.ai.threeweight;
				break;
			case 44:
				point_pos[i][j] = gameset.ai.fourweight;
				break;
			default:
				point_pos[i][j] = 0;
				break;
			}
			stone_pos[i][j] = spp[i][j];
			//			point_pos[i][j] = sps[i][j];
		}
	}
}
int addpoint(int* stone, int* point) {
	if (stone[5] == 1) {
		for (int i = 0; i < 11; i++) {
			if (stone[i] == 3) {
				stone[i] = 2;
			}
		}
	}
	else if (stone[5] == 2) {
		for (int i = 0; i < 11; i++) {
			if (stone[i] == 1) {
				stone[i] = 2;
			}
			else if (stone[i] == 2) {
				stone[i] = 1;
			}
			else if (stone[i] == 3) {
				stone[i] = 2;
			}
		}
	}
	int line = -1;
	int x = 0, y = 0;
	for (x; x < 126; x++) {
		for (y; y < 11; y++) {
			if (stone_pos[x][y] != -1) {	// 상관없음(-1) 거르기
				if (stone_pos[x][y] == 0 && stone[y] != 0) {	// 빈칸(0) 비교
					y = 0;
					break;
				}
				else if (stone_pos[x][y] == 1 && stone[y] != 1) {	// 자기 돌(1) 비교
					y = 0;
					break;
				}
				else if (stone_pos[x][y] == 2 && stone[y] != 2) {	// 상대 돌 또는 막힘(2) 비교
					y = 0;
					break;
				}
				else if (stone_pos[x][y] == 3 && stone[y] == 1) {	// 자기 돌 아님(3) 비교
					y = 0;
					break;
				}
			}
		}
		if (y != 0) {
			line = x;
			break;
		}
	}

	if (line != -1) {	// 가중치 경우와 일치 시
		for (int i = 0; i < 11; i++) {
			point[i] = point_pos[line][i];
		}
		return 0;	// point_arr에 가중치 저장 후 0 반환
	}
	else return -1;	// -1 반환
}
int check_rule(int ptx, int pty, int omap[MSIZE+2][MSIZE+2][4])//0 금수 1 가능 2 우승
{
	int ll, xx, yy, xt, yt, rulecnt[7], trule[3][6], frule[4][6], findfour[3], rulefinal;
	int pp = 1, wp;
	bool rulepos;
	if (omap[ptx][pty][0] != 0)return 0;//이미 돌이 놓여있음
	for (k = 0; k < 4; ++k) {
		for (l = 0; l < 6; ++l) {
			if (k < 3)trule[k][l] = 1 + turn;
			frule[k][l] = 1 + turn;
		}
		if (k > 0)frule[k][k] = 0;//10111,11011,11101
	}
	trule[0][0] = trule[0][4] = 0;//01110
	trule[1][0] = trule[1][2] = trule[1][5] = 0;//010110
	trule[2][0] = trule[2][3] = trule[2][5] = 0;//011010
	frule[0][0] = frule[0][5] = 2;//?1111?
	omap[ptx][pty][0] = 1 + turn;//임시로 돌 놓기
	for (k = 0; k < 7; ++k)rulecnt[k] = 0;
	for (ll = 0; ll < 4; ++ll) {//방향
		xx = ptx + direct[ll][0] * 5;
		yy = pty + direct[ll][1] * 5;
		wp = 0;//오목육목판정변수 초기화
		for (k = 0; k <= 5 && pp == 1; ++k) {//순차로 검사
			if (xx >= 1 && xx <= MSIZE && yy >= 1 && yy <= MSIZE && pp == 1) {//33검사
				if (k > 0) {
					xt = xx;
					yt = yy;
					rulepos = true;
					for (l = 0; l < 5; ++l) {//01110검사
						if (xt >= 1 && xt <= MSIZE && yt >= 1 && yt <= MSIZE) {
							if (omap[xt][yt][0] != trule[0][l]) {
								rulepos = false;
								break;
							}
							xt -= direct[ll][0];
							yt -= direct[ll][1];
						}
						else {
							rulepos = false;
							break;
						}
					}
					if (rulepos == true)rulecnt[0]++;
				}
				xt = xx;
				yt = yy;
				rulepos = true;
				for (l = 0; l < 6; ++l) {//010110검사
					if (xt >= 1 && xt <= MSIZE && yt >= 1 && yt <= MSIZE) {
						if (omap[xt][yt][0] != trule[1][l]) {
							rulepos = false;
							break;
						}
						xt -= direct[ll][0];
						yt -= direct[ll][1];
					}
					else {
						rulepos = false;
						break;
					}
				}
				if (rulepos == true)rulecnt[1]++;
				xt = xx;
				yt = yy;
				rulepos = true;
				for (l = 0; l < 6; ++l) {//011010검사
					if (xt >= 1 && xt <= MSIZE && yt >= 1 && yt <= MSIZE) {
						if (omap[xt][yt][0] != trule[2][l]) {
							rulepos = false;
							break;
						}
						xt -= direct[ll][0];
						yt -= direct[ll][1];
					}
					else {
						rulepos = false;
						break;
					}
				}
				if (rulepos == true)rulecnt[2]++;
			}
			rulefinal = 0;
			for (l = 0; l < 3; ++l)rulefinal += rulecnt[l];//33
			if (rulefinal >= 2) {//33성립
				pp = 0;
				break;
			}
			if (xx >= 1 && xx <= MSIZE && yy >= 1 && yy <= MSIZE && pp == 1) {//44검사
				xt = xx;
				yt = yy;
				rulepos = true;
				for (l = 0; l < 3; ++l)findfour[l] = 0;
				for (l = 0; l < 6; ++l) {//?1111?검사
					if (xt >= 1 && xt <= MSIZE && yt >= 1 && yt <= MSIZE) {
						if (l == 0 || l == 5) {
							if (omap[xt][yt][0] == 1 + turn)findfour[0]++;
							else if (omap[xt][yt][0] == 0)findfour[1]++;
							else findfour[2]++;
						}
						else if (omap[xt][yt][0] != frule[0][l]) {
							rulepos = false;
							break;
						}
						xt -= direct[ll][0];
						yt -= direct[ll][1];
					}
					else {
						rulepos = false;
						break;
					}
				}
				if (rulepos == true) {
					rulecnt[3]++;
					if (findfour[0] == 2)wp = -1;//육목확정
					else if (findfour[2] == 2)rulecnt[3]--;//양쪽이 막혀서 4에 해당하지 않음
					else if (findfour[0] == 1) {
						if (wp == 0)wp = 1;//오목 완성
					}
				}
				if (k > 0 && pp == 1) {
					xt = xx;
					yt = yy;
					rulepos = true;
					for (l = 0; l < 5; ++l) {//10111검사
						if (xt >= 1 && xt <= MSIZE && yt >= 1 && yt <= MSIZE) {
							if (omap[xt][yt][0] != frule[1][l]) {
								rulepos = false;
								break;
							}
							xt -= direct[ll][0];
							yt -= direct[ll][1];
						}
						else {
							rulepos = false;
							break;
						}
					}
					if (rulepos == true)rulecnt[4]++;
					xt = xx;
					yt = yy;
					rulepos = true;
					for (l = 0; l < 5; ++l) {//11011검사
						if (xt >= 1 && xt <= MSIZE && yt >= 1 && yt <= MSIZE) {
							if (omap[xt][yt][0] != frule[2][l]) {
								rulepos = false;
								break;
							}
							xt -= direct[ll][0];
							yt -= direct[ll][1];
						}
						else {
							rulepos = false;
							break;
						}
					}
					if (rulepos == true)rulecnt[5]++;
					xt = xx;
					yt = yy;
					rulepos = true;
					for (l = 0; l < 5; ++l) {//11101검사
						if (xt >= 1 && xt <= MSIZE && yt >= 1 && yt <= MSIZE) {
							if (omap[xt][yt][0] != frule[3][l]) {
								rulepos = false;
								break;
							}
							xt -= direct[ll][0];
							yt -= direct[ll][1];
						}
						else {
							rulepos = false;
							break;
						}
					}
					if (rulepos == true)rulecnt[6]++;
				}
			}
			rulefinal = 0;
			for (l = 3; l < 7; ++l)rulefinal += rulecnt[l];//44
			if (rulefinal >= 2) {//44성립
				pp = 0;
				break;
			}
			xx -= direct[ll][0];
			yy -= direct[ll][1];
		}
		if (wp == 1)pp = 2;//오목확정
		else if (wp == -1);//육목확정
	}
	if (pp != 2) {
		rulefinal = 0;
		for (l = 0; l < 3; ++l)rulefinal += rulecnt[l];//33
		if (rulefinal >= 2) {//33성립
			pp = 0;
		}
		rulefinal = 0;
		for (l = 3; l < 7; ++l)rulefinal += rulecnt[l];//44
		if (rulefinal >= 2) {//44성립
			pp = 0;
		}
	}
	omap[ptx][pty][0] = 0;//임시로 놓은 돌 다시 제거
	if (pp != 2 && 1 + turn == 1)pp = 1;//백돌에게는 금수 적용 안됨
	return pp;
}


void get_st_arr() {
	int s_arr[11] = {};
	int p_arr[11] = {};
	int color = 0;

	// map 배열 가중치 초기화
	for (int x = 1; x < 21; x++) {
		for (int y = 1; y < 21; y++) {
			map[x][y][1] = 0;
			map[x][y][2] = 0;
		}
	}

	for (int x = 1; x < 21; x++) {
		for (int y = 1; y < 21; y++) {
			if (map[x][y][0] == 1 || map[x][y][0] == 2) {	// 백돌 또는 흑돌이 놓여 있으면
				color = map[x][y][0];
				// stone_arr, point_arr 초기화
				for (int i = 0; i < 11; i++) {
					s_arr[i] = 3;
					p_arr[i] = 0;
				}
				// 현재 위치의 돌
				s_arr[5] = map[x][y][0];

				// 가로로 각 방향 5칸씩 받기
				for (int i = 1; i < 6; i++) {
					s_arr[5 - i] = map[x][y - i][0];
					if (map[x][y - i][0] == 3) {
						break;
					}
				}
				for (int i = 1; i < 6; i++) {
					s_arr[5 + i] = map[x][y + i][0];
					if (map[x][y + i][0] == 3) {
						break;
					}
				}
				// 가로방향의 가중치 계산
				addpoint(s_arr, p_arr);

				// map 배열에 가중치 더하기
				for (int i = 1; i < 6; i++) {
					if (map[x][y - i][0] == 3) {
						break;
					}
					map[x][y - i][color] += p_arr[5 - i];
				}
				for (int i = 1; i < 6; i++) {
					if (map[x][y + i][0] == 3) {
						break;
					}
					map[x][y + i][color] += p_arr[5 + i];
				}
				// 가로방향 끝

				// stone_arr, point_arr 초기화
				for (int i = 0; i < 11; i++) {
					s_arr[i] = 3;
					p_arr[i] = 0;
				}
				// 현재 위치의 돌
				s_arr[5] = map[x][y][0];

				// 세로로 각 방향 5칸씩 받기
				for (int i = 1; i < 6; i++) {
					s_arr[5 - i] = map[x - i][y][0];
					if (map[x - i][y][0] == 3) {
						break;
					}
				}
				for (int i = 1; i < 6; i++) {
					s_arr[5 + i] = map[x + i][y][0];
					if (map[x + i][y][0] == 3) {
						break;
					}
				}
				// 세로방향의 가중치 계산
				addpoint(s_arr, p_arr);

				// map 배열에 가중치 더하기
				for (int i = 1; i < 6; i++) {
					if (map[x - i][y][0] == 3) {
						break;
					}
					map[x - i][y][color] += p_arr[5 - i];
				}
				for (int i = 1; i < 6; i++) {
					if (map[x + i][y][0] == 3) {
						break;
					}
					map[x + i][y][color] += p_arr[5 + i];
				}
				// 세로방향 끝

				// stone_arr, point_arr 초기화
				for (int i = 0; i < 11; i++) {
					s_arr[i] = 3;
					p_arr[i] = 0;
				}
				// 현재 위치의 돌
				s_arr[5] = map[x][y][0];

				// 좌상 대각선으로 각 방향 5칸씩 받기
				for (int i = 1; i < 6; i++) {
					s_arr[5 - i] = map[x - i][y - i][0];
					if (map[x - i][y - i][0] == 3) {
						break;
					}
				}
				for (int i = 1; i < 6; i++) {
					s_arr[5 + i] = map[x + i][y + i][0];
					if (map[x + i][y + i][0] == 3) {
						break;
					}
				}
				// 좌상 대각선방향의 가중치 계산
				addpoint(s_arr, p_arr);

				// map 배열에 가중치 더하기
				for (int i = 1; i < 6; i++) {
					if (map[x - i][y - i][0] == 3) {
						break;
					}
					map[x - i][y - i][color] += p_arr[5 - i];
				}
				for (int i = 1; i < 6; i++) {
					if (map[x + i][y + i][0] == 3) {
						break;
					}
					map[x + i][y + i][color] += p_arr[5 + i];
				}
				// 좌상 대각선방향 끝

				// stone_arr, point_arr 초기화
				for (int i = 0; i < 11; i++) {
					s_arr[i] = 3;
					p_arr[i] = 0;
				}
				// 현재 위치의 돌
				s_arr[5] = map[x][y][0];

				// 우상 대각선으로 각 방향 5칸씩 받기
				for (int i = 1; i < 6; i++) {
					s_arr[5 - i] = map[x - i][y + i][0];
					if (map[x - i][y + i][0] == 3) {
						break;
					}
				}
				for (int i = 1; i < 6; i++) {
					s_arr[5 + i] = map[x + i][y - i][0];
					if (map[x + i][y - i][0] == 3) {
						break;
					}
				}
				// 우상 대각선방향의 가중치 계산
				addpoint(s_arr, p_arr);

				// map 배열에 가중치 더하기
				for (int i = 1; i < 6; i++) {
					if (map[x - i][y + i][0] == 3) {
						break;
					}
					map[x - i][y + i][color] += p_arr[5 - i];
				}
				for (int i = 1; i < 6; i++) {
					if (map[x + i][y - i][0] == 3) {
						break;
					}
					map[x + i][y - i][color] += p_arr[5 + i];
				}
				// 우상 대각선방향 끝
				color = 0;
			}
		}
	}
}